- Thiết lập classic active/active yêu cầu mọi hệ thống có full quyền đọc và viết để hệ thống file chứa dữ liệu của ngườ dùng.
- Do đó, một classic active/active yêu cầu sử dụng hệ thống cluster file hoặc bộ lưu trữ central NFS (Mô tả active/active cluster trên cơ sở sao chép trong Section 16.4)
- Tuy nhiên, ý kiến setup active/active của tôi với bộ nhớ dùng chung khá có vấn đề:
  - Hệ thống file cluster có thể là một giải pháp tuyệt vời, nhưng admin cần rất nhiều kiến thức chuyên môn. Họ có những thất bại và khó khăn của họ cũng cần được làm chủ. Hệ thống cluster file rất tốt trong việc đảm bảo rằng hệ thống file có thể được sử dụng tích cực trong một số hệ thống song song, vì vậy, chúng đảm bảo tính khả dụng ở nhiều địa điểm cùng một lúc. Nhưng điều đó không có nghĩa hệ thống cluster file thì tự động nhanh và tăng hiệu suất. Hoàn thành tốt, chúng cải thiện hiệu suất, nhưng ngược lại chúng sẽ làm giảm hiệu suất nếu chúng thực hiện không tốt
  - NFS cung cấp quyền truy cập song song cho nhiều server vào hệ thống tệp duy nhất, và có thể đực định nghĩa là một hệ thống cluster file về mặt này. NFS không tệ như chúng ta nghĩ, với việc triển khai NFS tốt, bạn có thể đạt được tỉ lệ truy cập rất tốt. Một local file system sẽ luôn nhanh, vì vậy NFS nên được coi là một phương pháp để mở rộng quy mô chứ không phải một biện pháp nâng cấp. Hiệu suất I/O thường bottleneck, vì vậy câu hỏi đặt ra là tại sao bạn lại muốn thực hiện mở rộng quy mô. Hay nói cách khác: mở rộng quy mô có thể phản tác dụng ở đây
- Ngay cả khi định dạng Maildir ban đầu được thiết kế rõ ràng để sử dụng qua NFS, bạn phải thực hiện các điều chỉnh đối với Dovecot nếu muốn sử dụng hệ thống cluster file hoặc NFS; bạn sẽ tìm thấy các cài đặt cần thiết trong `10-mail.conf`. Dovecot được tối ưu hóa cao về mặt truy cập tệp và sử dụng các kỹ thuật như 'ánh xạ bộ nhớ' ( mmap ) hoặc ghi bộ đệm để tăng thông lượng. Ít nhất đối với NFS, bạn phải hủy kích hoạt gần như tất cả các tối ưu hóa này, vì chúng không tương thích với NFS hoặc (ví dụ: trong trường hợp ghi chậm) gây ra sự không nhất quán trong cluster vì các hệ thống khác nhau trong cụm truy cập dữ liệu lỗi thời, có thể dẫn đến sự hỗn loạn và thậm chí làm hỏng hộp thư. Nếu bạn sử dụng Dovecot Director, hãy đảm bảo rằng cùng một người dùng luôn được kết nối với cùng một máy chủ mục tiêu (thêm về điều này trong Phần 16.3.1). Cái đó tránh được nhiều vấn đề về bộ nhớ đệm, nhưng nó không ngăn chặn chúng hoàn toàn. Nếu bạn không sử dụng Director, và/hoặc nếu bạn phải giả sử rằng một người dùng đã đăng nhập đồng thời trong các hệ thống khác nhau, thì bạn phải tránh các vấn đề về bộ nhớ đệm với tệp index và tệp email. Tắt tính năng tối ưu hóa trong quyền truy cập tệp và đảm bảo bạn định cấu hình Dovecot trong `10-mail.conf` như sau:
```
mmap_disable = yes
dotlock_use_excl = no
mail_fsync = always
mail_nfs_storage = yes
mail_nfs_index = yes
```
